âŒ FILES STILL MISSING - UPLOAD TO CORRECT PATH
==============================================

The files are NOT in /var/www/cryptorafts yet!
You need to upload them via Hostinger File Manager.


STEP 1: Upload via Hostinger File Manager
------------------------------------------
1. Go to: https://hpanel.hostinger.com/
2. Login with your Hostinger account
3. Go to: File Manager
4. IMPORTANT: Navigate to /var/www/cryptorafts
   - Click on the PATH BAR at the top of File Manager
   - Type: /var/www/cryptorafts
   - Press Enter
   - You should now see the cryptorafts directory
5. Upload ALL files from your local DEPLOY_TO_VPS folder:
   - Click "Upload" button
   - Select ALL files from your DEPLOY_TO_VPS folder:
     * src/ folder (entire folder)
     * package.json
     * next.config.js
     * tsconfig.json
     * public/ folder (if exists)
     * .env.production (if needed)
     * All other files
   - Wait for upload to complete


STEP 2: Verify files are uploaded
---------------------------------
After uploading, in your SSH terminal, run:

cd /var/www/cryptorafts
ls -la

You should see:
- package.json
- next.config.js
- tsconfig.json
- src/ directory
- public/ directory (if uploaded)

Check:
ls -la package.json
ls -la src/app/page.tsx
ls -la next.config.js

All should exist now!


STEP 3: If files uploaded to wrong location
--------------------------------------------
If files are in /var/www/html or public_html:

# In SSH terminal:
find /var/www/html -name "package.json" -type f
find /var/www -name "package.json" -type f

# If found in wrong location, move them:
cp -r /var/www/html/* /var/www/cryptorafts/ 2>/dev/null || true
cp -r /var/www/html/cryptorafts/* /var/www/cryptorafts/ 2>/dev/null || true


STEP 4: After files are uploaded correctly
-------------------------------------------
cd /var/www/cryptorafts
ls -la package.json

# If file exists, continue:
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
nvm use 20
node --version

npm install --legacy-peer-deps
rm -rf .next out node_modules/.cache
NODE_ENV=production npm run build

Wait 5-10 minutes!


STEP 5: Start PM2
-----------------
After build completes:

pm2 stop all
pm2 delete all

NODE_PATH=$(which node)
cat > ecosystem.config.js << EOF
module.exports = {
  apps: [
    {
      name: 'cryptorafts',
      script: './server.js',
      instances: 1,
      exec_mode: 'fork',
      interpreter: '$NODE_PATH',
      env: {
        NODE_ENV: 'production',
        PORT: 3000,
      },
      error_file: './logs/pm2-error.log',
      out_file: './logs/pm2-out.log',
      log_date_format: 'YYYY-MM-DD HH:mm:ss Z',
      merge_logs: true,
      autorestart: true,
      watch: false,
      max_memory_restart: '1G',
      min_uptime: '10s',
      max_restarts: 10,
      restart_delay: 4000,
    },
  ],
};
EOF

mkdir -p logs
pm2 start ecosystem.config.js
pm2 save
pm2 status


STEP 6: Verify
--------------
curl http://localhost:3000

Should show HTML (not error)!


THEN VISIT: https://www.cryptorafts.com


CRITICAL: Upload to /var/www/cryptorafts NOT public_html!

