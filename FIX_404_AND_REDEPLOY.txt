cd /var/www/cryptorafts && echo "ðŸ”§ Fixing 404 Error..." && echo "" && echo "ðŸ“Š Step 1: Stopping PM2..." && pm2 stop cryptorafts && pm2 delete cryptorafts && echo "" && echo "ðŸ”¨ Step 2: Rebuilding app..." && rm -rf .next out node_modules/.cache && export NVM_DIR="$HOME/.nvm" && . "$NVM_DIR/nvm.sh" && nvm use 20 && NODE_ENV=production npm run build && echo "âœ… Build completed!" && echo "" && echo "ðŸ“‹ Step 3: Verifying build..." && ls -la .next/standalone 2>/dev/null || ls -la .next/server 2>/dev/null || echo "âš ï¸  Checking .next structure..." && ls -la .next | head -10 && echo "" && echo "ðŸš€ Step 4: Restarting PM2..." && pm2 start ecosystem.config.js && pm2 save && sleep 5 && echo "" && echo "ðŸ“Š Step 5: PM2 Status:" && pm2 status && echo "" && echo "ðŸ“‹ Step 6: PM2 Logs:" && pm2 logs cryptorafts --lines 10 --nostream && echo "" && echo "ðŸŒ Step 7: Testing server..." && curl -s http://localhost:3000 | head -30 && echo "" && echo "ðŸ”§ Step 8: Verifying Nginx..." && cat /etc/nginx/sites-enabled/cryptorafts && echo "" && echo "ðŸŒ Step 9: Testing via Nginx..." && curl -I -H "Host: cryptorafts.com" http://127.0.0.1 2>&1 | head -5 && echo "" && echo "âœ… Fix complete! App should be accessible at https://cryptorafts.com"

